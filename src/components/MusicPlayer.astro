---
// src/components/MusicPlayer.astro
// ã€æœ€ç»ˆæ–¹æ¡ˆã€‘
// æˆ‘ä»¬ç°åœ¨ç›´æ¥ä»ä½ ç½‘ç«™çš„ public ç›®å½•åŠ è½½æœ¬åœ°éŸ³ä¹æ–‡ä»¶ã€‚
// è¿™æ˜¯æœ€ç¨³å®šã€æœ€å¯é çš„æ–¹æ³•ï¼Œä¸ä¼šæœ‰ä»»ä½•ç½‘ç»œæˆ–æƒé™é—®é¢˜ã€‚
---

<!-- 1. å¼•å…¥ APlayer çš„ CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">

<!-- 2. APlayer æ’­æ”¾å™¨çš„æŒ‚è½½ç‚¹ -->
<div id="aplayer"></div>

<!-- 3. å¼•å…¥ APlayer çš„ JS -->
<script is:inline src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<!-- 4. åˆå§‹åŒ– APlayer -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', function () {
    const ap = new APlayer({
      container: document.getElementById('aplayer'),
      fixed: true,
      mini: true,
      theme: '#2980b9',
      audio: [
        {
          name: 'çˆ±åœ¨è¥¿å…ƒå‰', // æ”¹æˆä½ çš„æ­Œæ›²å
          artist: 'å‘¨æ°ä¼¦', // æ”¹æˆæ­Œæ‰‹å
          url: '/music/çˆ±åœ¨è¥¿å…ƒå‰ - å‘¨æ°ä¼¦.mp3', // ã€é‡è¦ã€‘å¯¹åº” public/music/song1.mp3
          cover: 'https://iili.io/F4lPWkG.jpg', // ã€é‡è¦ã€‘å¯¹åº” public/music/cover1.jpg
        },
        {
          name: 'æ›¹æ“',
          artist: 'æ—ä¿Šæ°',
          url: '/music/æ›¹æ“ - æ—ä¿Šæ°.mp3', // ã€é‡è¦ã€‘å¯¹åº” public/music/song2.mp3
          cover: 'https://iili.io/F4lPWkG.jpg', // ã€é‡è¦ã€‘å¯¹åº” public/music/cover2.png
        }
        // ä½ å¯ä»¥æŒ‰è¿™ä¸ªæ ¼å¼æ·»åŠ æ›´å¤šæ­Œæ›²
      ]
    });
  });
</script>

<style is:global>
  .aplayer.aplayer-fixed {
    position: fixed !important;
    left: 15px !important;
    bottom: 15px !important;
    z-index: 2147483647 !important;
  }
</style>
```

æ¥ä¸‹æ¥ï¼ŒæŒ‰ç…§ä½ çš„è¦æ±‚ï¼Œæˆ‘å·²å°† Canvas ä¸­çš„ `Layout.astro` æ–‡ä»¶**æ¢å¤åˆ°ä½ ä¹‹å‰çš„ç‰ˆæœ¬**ï¼Œé‡æ–°å¯ç”¨äº† `InitFn()` è„šæœ¬ã€‚


```astro
---
// å…³é”®ï¼šä¸å†éœ€è¦ä» props è·å– headings
const { title, keywords, description, pagecover, activeNav, Home } = Astro.props;
// å¯¼å…¥ç½‘ç«™å…¨å±€é…ç½®
import SITE_INFO from "@/config";
const { GoogleAds, Theme, HomeBanner } = SITE_INFO;
const { ad_Client, asideAD_Slot, articleAD_Slot } = GoogleAds;
// å¯¼å…¥å„ä¸ªç»„ä»¶
import Head from "@/components/Head/Head.astro";
import Header from "@/components/Header/Header.astro";
import MainHeader from "@/components/MainHeader/MainHeader.astro";
import Aside from "@/components/Aside/Aside.astro";
import Footer from "@/components/Footer/Footer.astro";
import BackTop from "@/components/BackTop/BackTop.astro";
import MobileSidebar from "@/components/MobileSidebar/MobileSidebar.astro";
import SakuraEffect from "@/components/SakuraEffect.astro";
// å¯¼å…¥æ–°çš„ç›®å½•ç®¡ç†å™¨
import TocManager from "@/components/TocManager.astro";

// 1. å¯¼å…¥éŸ³ä¹æ’­æ”¾å™¨ç»„ä»¶
import MusicPlayer from "@/components/MusicPlayer.astro";

// å¼•å…¥æ ·å¼
import "@/styles/Reset.less";
import "@/styles/Base.less";
import "./Layout.less";
---

<html lang="zh-CN">
	<Head {title} {keywords} {description} PageCover={pagecover}>
		<!-- è°·æ­Œå¹¿å‘ŠJSåŠ è½½é¡¹ -->
		{ad_Client && (asideAD_Slot || articleAD_Slot) && <script is:inline async src={`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${ad_Client}`} crossorigin="anonymous" />}
		<!-- å½©æ——ğŸˆç‰¹æ•ˆè„šæœ¬ -->
		<script is:inline src="/assets/js/vhCaiqi.js" defer></script>
		<!-- å†…è”æ ·å¼ -->
		<Fragment
			set:html={`<style>:root {${Object.entries(Theme)
				.map(([key, value]) => `${key}:${value};`)
				.join("")}--vh-main-header-height:${Home ? HomeBanner.HomeHeight : HomeBanner.PageHeight};--vh-home-banner:${HomeBanner.background}}</style>`}
		/>
	</Head>
	<body>
		<MobileSidebar />
		<Header {activeNav} />
		<main class="main">
			{HomeBanner.enable && <MainHeader />}
			<section class="main-inner" style={`padding-top:${HomeBanner.enable ? "0.88rem" : "calc(66px + 0.68rem)"}`}>
				<section class="main-inner-content">
					<slot />
				</section>
                {/* å…³é”®ï¼šAside ç»„ä»¶ä¸å†éœ€è¦ä»»ä½• props */}
				<Aside />
			</section>
			<BackTop />
		</main>
		<Footer />
		<SakuraEffect />
		
		{/* å…³é”®ï¼šåœ¨é¡µé¢åº•éƒ¨æ·»åŠ ç›®å½•ç®¡ç†å™¨ */}
		<TocManager />

        {/* 2. åœ¨ body ç»“æŸå‰æ·»åŠ éŸ³ä¹æ’­æ”¾å™¨ç»„ä»¶ */}
        <MusicPlayer />

		{/* --- æ¢å¤äº†ä½ åŸæ¥çš„è„šæœ¬ --- */}
		<script>
			import InitFn from "@/scripts/Init";
			InitFn();
		</script>
	</body>
</html>
